@using UI.Controllers

@{ Layout = null; }

<!DOCTYPE HTML>
<!--
    Editorial by HTML5 UP
    html5up.net |
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>HealthHelper 你的健康管理助手</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="~/Content/css/main.css" />

    @RenderSection("Styles", required: false)
    <style>
        a.toggle {
            color: red;
        }

        #dialogDiv {
            display:none;
        }

        #dialogDiv ul {
            list-style-type:none;
        }

        #dialogDiv ul li::before {
            content: "\2022"; /* Add content: \2022 is the CSS Code/unicode for a bullet */
            color: #f56a6a; /* Change the color */
            font-weight: bold; /* If you want it to be bold */
            display: inline-block; /* Needed to add space between the bullet and the text */
            width: 1em; /* Also needed for space (tweak if needed) */
            margin-left: -1em; /* Also needed for space (tweak if needed) */
        }

        .no-close .ui-dialog-titlebar-close {
            display: none;
        }

        .btnOK {
            all: initial;
            border: none !important;
        }

        .ui-dialog-titlebar {
            background-color: #f56a6a;
            color: white;
        }
    </style>
</head>

<!--恩旗-->
@if (Session["ID"] != null)
{
    var controller = ViewContext.Controller as Controller;
    Home2Controller.SetWeightLogSession(controller.HttpContext);
    Home2Controller.SetPreferencesSession(controller.HttpContext);
    if (Session["dialogShown"] == null)
    {
        Session["dialogShown"] = false;
    }
}
<!--================================================================-->

<body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
        <!-- Main -->
        <div id="main">
            <div class="inner">
                <!-- Header -->
                <header id="header" style=" background-color: #fad7d2">
                    <div class="row d-flex">

                        <div class="col-4 col-sm-4 col-lg-2 d-flex " style="padding-left:50px; vertical-align:central;">
                            <a href="/Home2/Index" style="text-decoration: none;width:100px"><img src="~/Areas/Admin/Content/tempimage/hLogoRed.jpg" style="max-width:100%;width:100px"></a>
                        </div>
                        <div class="col-7 col-sm-8 col-lg-10" style="padding-top:5px; padding-left:0px">
                            <a href="/Home2/Index" class="logo" style="text-decoration: none">
                                <div class="col-12 col-md-4">
                                    <strong id="logoText" style="font-size:1.7em">HealthHelper</strong>
                                </div>

                                <div class="col-12 col-md-8" style="font-size:1.5em">健康管理助手</div>
                            </a>
                        </div>
                    </div>
                </header>
                @RenderBody()
            </div>
        </div>



        <!-- Sidebar -->
        <div id="sidebar">
            <div class="inner">

                <!-- Search -->
                <!-- Menu -->
                <nav id="menu">
                    <header class="major">
                        <h2>選單</h2>
                    </header>
                    <ul style="font-size:1.5em">
                        <li><a href="~/Home2/Index" style="text-decoration:none"><i class="fas fa-home" style="width:30px"></i> 首頁</a></li>
                        @if (Session["ID"] == null)
                        {
                            <li><a href="~/Home2/Login" style="text-decoration:none"> <i class="fas fa-user" style="width:30px"></i> 登入</a></li>
                        }
                        else
                        {
                            <li>
                                <span class="opener"><i class="fas fa-user" style="width:30px"></i> 會員</span>
                                <ul>
                                    <li><a href="#" style="text-decoration:none"><i class="fas fa-gift" style="width:30px"></i> 會員資訊</a></li>
                                    <li>
                                        <a href="~/Weight/WeightLog" style="text-decoration:none; display:inline-block; position:relative"><i class="fas fa-gift" style="width:30px"></i> 體重管理</a>
                                        @if (Session["NoWeightLog"] != null && (bool)Session["NoWeightLog"])
                                        {   //if last 7 days has no weightlog, show this icon
                                            <i id="weightNotify" class="fa fa-comment" style="color:#f56a6a; display:inline-block; position:relative; top:-7px; left:-3px"></i>
                                        }
                                    </li>
                                    <li><a href="#" style="text-decoration:none"><i class="fas fa-chart-area" style="width:30px"></i> 我的綜合圖表</a></li>


                                </ul>

                            </li>
                        }
                        <li><a href="~/Home2/Index" style="text-decoration:none"><i class="fas fa-book" style="width:30px"></i> 遊戲規則</a></li>


                        @if (Session["ID"] != null)
                        {

                            <li>
                                <span class="opener"><i class="fas fa-utensils" style="width:30px"></i> 飲食</span>
                                <ul>

                                    <li><a href="#" style="text-decoration:none"><i class="fas fa-pen" style="width:30px"></i> 紀錄飲食</a></li>

                                    <li><a href="~/FrontGift/GiftCart?userID=@Session["ID"]" style="text-decoration:none"><i class="fas fa-history" style="width:30px"></i> 飲食歷史</a></li>

                                </ul>

                            </li>


                            <li>
                                <span class="opener"><i class="fas fa-dumbbell" style="width:30px"></i> 運動</span>
                                <ul>

                                    <li><a href="~/Workout/WorkoutLog" style="text-decoration:none"><i class="fas fa-clipboard-list" style="width:30px"></i> 運動紀錄</a></li>
                                    <li><a href="~/Workout/WorkoutSchedule" style="text-decoration:none"><i class="fas fa-running" style="width:30px"></i> 運動排程</a></li>
                                    <li>
                                        <a href="~/Workout/WorkoutPreferences" style="text-decoration:none; display:inline-block; position:relative"><i class="fas fa-star" style="width:30px"></i> 喜好管理</a>
                                        @if (Session["NoPreferences"] != null && (bool)Session["NoPreferences"])
                                        {   //if last 7 days has no weightlog, show this icon
                                            <i id="preferencesNotify" class="fa fa-comment" style="color:#f56a6a; display:inline-block; position:relative; top:-7px; left:-3px"></i>
                                        }
                                    </li>

                                </ul>

                            </li>

                            <li>
                                <span class="opener"><i class="fas fa-fist-raised" style="width:30px"></i> 挑戰</span>
                                <ul>

                                    <li><a href="~/FrontGift/GiftList" style="text-decoration:none"><i class="fas fa-pen-nib" style="width:30px"></i> 參加挑戰</a></li>
                                    <li><a href="~/FrontGift/GiftList" style="text-decoration:none"><i class="fas fa-running" style="width:30px"></i> 我的挑戰</a></li>
                                    <li><a href="~/FrontGift/GiftCart?userID=@Session["ID"]" style="text-decoration:none"><i class="fas fa-history" style="width:30px"></i> 過去挑戰</a></li>


                                </ul>

                            </li>
                        }

                        <li>
                            <span class="opener"><i class="fas fa-gifts" style="width:30px"></i> 禮物</span>
                            <ul>
                                <li><a href="~/FrontGift/GiftList" style="text-decoration:none"><i class="fas fa-gift" style="width:30px"></i> 禮物店</a></li>
                                @if (Session["ID"] != null)
                                {
                                    <li><a href="~/FrontGift/GiftCart?userID=@Session["ID"]" style="text-decoration:none"><i class="fas fa-shopping-cart" style="width:30px"></i> 已兌換禮物</a></li>
                                }

                            </ul>
                        </li>
                        <li>
                            <span class="opener"><i class="fas fa-file" style="width:30px"></i> 貼文</span>
                            <ul>
                                <li><a href="~/FrontPost/AllPosts" style="text-decoration:none"><i class="far fa-file" style="width:30px"></i> 所有貼文</a></li>
                                @if (Session["ID"] != null)
                                {

                                    <li><a href="~/FrontPost/UserPostList" style="text-decoration:none"><i class="fas fa-user-edit" style="width:30px"></i> 我的貼文</a></li>
                                }
                            </ul>
                        </li>
                        @if (Session["ID"] != null)
                        {
                            <li><a href="~/FrontContact/Chat" style="text-decoration:none"><i class="fas fa-comments" style="width:30px"></i> 聯絡我們</a></li>
                        }

                        @if (Session["ID"] != null)
                        {
                            <li><a href="~/Admin/Login/Index" style="text-decoration:none"><i class="fas fa-user-cog" style="width:30px"></i> 後台</a></li>
                        }

                        @if (Session["ID"] != null)
                        {
                            <li><a href="~/Home2/Logout" style="text-decoration:none"><i class="fas fa-sign-out-alt" style="width:30px"></i> 登出</a></li>
                        }

                    </ul>
                </nav>

                <!-- Section -->
                <section>
                    <header class="major">
                        <h2>Ante interdum</h2>
                    </header>
                    <div class="mini-posts">
                        <article>
                            <a href="#" class="image"><img src="" alt="" /></a>
                            <p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
                        </article>
                        <article>
                            <a href="#" class="image"><img src="" alt="" /></a>
                            <p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
                        </article>
                        <article>
                            <a href="#" class="image"><img src="" alt="" /></a>
                            <p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
                        </article>
                    </div>
                    <ul class="actions">
                        <li><a href="#" class="button">More</a></li>
                    </ul>
                </section>

                <!-- Section -->
                <section>
                    <header class="major">
                        <h2>Get in touch</h2>
                    </header>
                    <p>Sed varius enim lorem ullamcorper dolore aliquam aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore. Proin sed aliquam facilisis ante interdum. Sed nulla amet lorem feugiat tempus aliquam.</p>
                    <ul class="contact">
                        <li class="icon solid fa-envelope"><a href="#">information@untitled.tld</a></li>
                        <li class="icon solid fa-phone">(000) 000-0000</li>
                        <li class="icon solid fa-home">
                            1234 Somewhere Road #8254<br />
                            Nashville, TN 00000-0000
                        </li>
                    </ul>
                </section>

                <!-- Footer -->
                <footer id="footer">
                    <p class="copyright">&copy; Untitled. All rights reserved. Demo Images: <a href="https://unsplash.com">Unsplash</a>. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
                </footer>

            </div>
        </div>
    </div>

    <!--todo-->
    <div id="dialogDiv"><ul></ul></div>

    <!-- Scripts -->
    <script src="~/Content/js/jquery.min.js"></script>
    <script src="~/Content/js/browser.min.js"></script>
    <script src="~/Content/js/breakpoints.min.js"></script>
    <script src="~/Content/js/util.js"></script>
    <script src="~/Content/js/main.js"></script>

    @RenderSection("Scripts", required: false)


<!--恩旗-->
<script>
    $(window).on("unload", function () {
        $.cookies.del('.ASPXAUTH');
    });

    //=====================================================
    //恩旗
    //Show NoWeightLog dialog
    $(function () {
        var noWeightLog = @Json.Encode(Session["NoWeightLog"]);
        var noPreferences = @Json.Encode(Session["NoPreferences"]);

        var dialogShown = @Json.Encode(Session["dialogShown"]);

        if (noWeightLog) {
            $("#dialogDiv > ul").append($("<li></li>").append("已經7天沒紀錄體重了"));
        }

        if (noPreferences) {
            $("#dialogDiv > ul").append($("<li></li>").append("還沒選擇喜好的運動類型"));
        }

        if (!dialogShown && $("#dialogDiv > ul > li").length) {
            $("#dialogDiv").dialog({
                title: "提醒",
                modal: true,
                open: function (event, ui) {
                    $('.ui-dialog .btnOK').addClass("primary")
                        .css("padding", "10px").css("border-radius", "5px")
                        .css("outline-color", "white");
                    $(this).parent().focus();
                },
                dialogClass: "no-close",
                buttons: [{
                    text: "OK",
                    class: "btnOK",
                    click: function () {
                        $("#dialogDiv").dialog("close");
                        $.ajax({
                            url: "/Home2/SetDialogShownSession",
                            type: "POST"
                        });
                    }
                }]
            });

            //$('.ui-dialog button').blur();
            $('.ui-dialog button').mousedown(function (e) {
                e.preventDefault();
            });

        }
    });
</script>
<!--====================================-->
</body>
</html>